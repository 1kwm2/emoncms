(function(f){var c={legend:{toggle:false},toggle:{rescale:true}},a=function(m,n,l){var i,o,k,j=m.is("td");if(j||(m.parents("td").length)){i=(j?m:m.parents("td"));o=i.parent();k=o.index();if(l[k].hiddenData===undefined){l[k].hiddenData=l[k].data;l[k].data=[];d(o)}else{l[k].data=l[k].hiddenData;delete l[k].hiddenData;e(o)}h(n,l)}},d=function(i){i.data("legendopacity",i.css("opacity"));i.css("opacity","0.40")},e=function(i){i.css("opacity",i.data("legendopacity"))},h=function(j,i){j.setData(i);if(j.getOptions().toggle.rescale){j.setupGrid()}j.draw()},b=function(i){i.hooks.legendInserted.push(function(n,m){var j=m.find("td"),l=n.getData();for(var k=0;k<j.length;k+=2){if(l[k/2].hiddenData!==undefined){d(f(j[k]).parent())}}m.unbind("click.flot").bind("selectstart",function(o){o.preventDefault();return false}).bind("click.flot",function(o){a(f(o.target),n,l)}).find("td").css("cursor","pointer")})},g=function(i){i.hooks.processOptions.push(function(k,j){if(j.legend.toggle){b(k)}})};f.plot.plugins.push({init:g,options:c,name:"toggleLegend",version:"0.5"})}(jQuery));